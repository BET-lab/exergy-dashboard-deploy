# Exergy Dashboard: ìƒì„¸ ì„¤ëª… ë° I/O ë¬¸ì„œ

## 1. í”„ë¡œì íŠ¸ ê°œìš”

Exergy DashboardëŠ” ë‹¤ì–‘í•œ ì—ë„ˆì§€ ì‹œìŠ¤í…œì˜ ì—‘ì„œì§€(Exergy) ë¶„ì„ì„ ì†ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ ëŒ€ì‹œë³´ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë‹¤ì–‘í•œ ì‹œìŠ¤í…œì„ ë“±ë¡í•˜ê³ , ê° ì‹œìŠ¤í…œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì…ë ¥í•˜ì—¬ ì—‘ì„œì§€ ë¶„ì„ ê²°ê³¼ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 1.1. ê°œë°œ ëª©í‘œ

ì´ í”„ë¡œì íŠ¸ì˜ ëª©í‘œëŠ” ë‹¤ì–‘í•œ ì‹œìŠ¤í…œê³¼ ëª¨ë“œ(ëƒ‰ë°©, ë‚œë°©, ì˜¨ìˆ˜ ë“±)ì— ëŒ€í•´ ì†ì‰½ê²Œ ì—‘ì„œì§€ ë¶„ì„ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë²”ìš©ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ëŒ€ì‹œë³´ë“œë¥¼ ê°œë°œí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëˆ„êµ¬ë‚˜ ìƒˆë¡œìš´ ì‹œìŠ¤í…œê³¼ í‰ê°€/ì‹œê°í™” í•¨ìˆ˜ë¥¼ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

### 1.2. ì£¼ìš” ê¸°ëŠ¥

-   **ë‹¤ì–‘í•œ ì‹œìŠ¤í…œ ë° ëª¨ë“œ ì§€ì›**: ASHP, GSHP ë“± ì—¬ëŸ¬ ì‹œìŠ¤í…œê³¼ ëƒ‰ë°©, ë‚œë°©, ì˜¨ìˆ˜ ë“± ë‹¤ì–‘í•œ ìš´ì „ ëª¨ë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
-   **íŒŒë¼ë¯¸í„° ê´€ë¦¬**: ì‹œìŠ¤í…œë³„ íŒŒë¼ë¯¸í„° ì…ë ¥ ë° ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
-   **ë™ì  í‰ê°€ í•¨ìˆ˜**: ì—‘ì„œì§€ í‰ê°€ í•¨ìˆ˜ë¥¼ ì†ì‰½ê²Œ ë“±ë¡í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-   **ì‹œê°ì  ë¶„ì„**: Altair ê¸°ë°˜ì˜ ì‹œê°í™” í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ì—¬ ëŒ€ì‹œë³´ë“œì—ì„œ ê²°ê³¼ë¥¼ ì‹œê°ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.
-   **ì›¹ ê¸°ë°˜ UI**: Streamlit ê¸°ë°˜ì˜ ì›¹ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•´ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
-   **ë†’ì€ í™•ì¥ì„±**: ì‚¬ìš©ì ì •ì˜ ì‹œìŠ¤í…œ, í‰ê°€, ì‹œê°í™” í•¨ìˆ˜ë¥¼ ì‰½ê²Œ ì¶”ê°€í•˜ê³  í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 2. ê¸°ìˆ  ìŠ¤íƒ

-   **ì–¸ì–´**: Python 3.11+
-   **ì›¹ í”„ë ˆì„ì›Œí¬**: Streamlit
-   **ë°ì´í„° ì‹œê°í™”**: Altair, Pandas
-   **íŒ¨í‚¤ì§€ ê´€ë¦¬**: uv
-   **ë¬¸ì„œí™”**: Markdown

## 3. ìƒì„¸ ë™ì‘ ì›ë¦¬ ë° ì•„í‚¤í…ì²˜

ì´ ì„¹ì…˜ì—ì„œëŠ” Exergy Dashboardì˜ ë‚´ë¶€ ë™ì‘ ë°©ì‹ê³¼ ë°ì´í„° íë¦„, ê·¸ë¦¬ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

### 3.1. ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨

ë‹¤ìŒ ë‹¤ì´ì–´ê·¸ë¨ì€ ì‚¬ìš©ìì˜ ì…ë ¥ë¶€í„° ì‹œì‘í•˜ì—¬ ë°ì´í„°ê°€ ê° ëª¨ë“ˆì„ ê±°ì³ ìµœì¢…ì ìœ¼ë¡œ ì‹œê°í™”ë˜ëŠ” ì „ì²´ ê³¼ì •ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

```mermaid
graph TD
    subgraph User Interaction
        A[Start App] --> B(Select Mode);
        B --> C(Add/Remove System);
        C --> D(Adjust Parameters);
    end

    subgraph App Lifecycle in app.py
        F[Initialize Session State] --> G[Dynamic Import `systems/*.py`];
        G --> H(Render Sidebar UI);
        H --> I(Render Main Panel UI);
        I -- Triggers --> J(Evaluate Parameters);
        J -- Triggers --> K(Render Visualizations);
    end

    subgraph Core Modules
        L[system.py<br/>SystemRegistry]
        M[evaluation.py<br/>EvaluationRegistry]
        N[visualization.py<br/>VisualizationRegistry]
    end
    
    subgraph "Session State (sss)"
        sss_mode["mode"]
        sss_systems["systems"]
        sss_params["system:param values"]
        sss_vars["system variables"]
    end

    A --> F;
    B -- Updates --> sss_mode;
    C -- Updates --> sss_systems;
    D -- Updates --> sss_params;

    G -- Populates --> L;
    H -- Uses --> L;
    I -- Reads --> sss_systems;

    J -- Calls registered function in --> M;
    M -- Returns results --> J;
    J -- Updates --> sss_vars;

    K -- Calls registered function in --> N;
    N -- Reads --> sss_vars;
    N -- Returns chart --> K;
```

### 3.2. ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒëª…ì£¼ê¸° (`app.py`)

`app.py`ëŠ” Streamlit ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

1.  **ì´ˆê¸°í™” ë‹¨ê³„**:
    -   **ë™ì  ëª¨ë“ˆ ì„í¬íŠ¸**: `app.py`ê°€ ì‹¤í–‰ë˜ë©´ ê°€ì¥ ë¨¼ì € `systems/` ë””ë ‰í† ë¦¬ ë‚´ì˜ ëª¨ë“  `*_system.py` íŒŒì¼ì„ ë™ì ìœ¼ë¡œ ì„í¬íŠ¸í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì„ í†µí•´ ê° íŒŒì¼ì— ì •ì˜ëœ ì‹œìŠ¤í…œ, í‰ê°€, ì‹œê°í™” í•¨ìˆ˜ë“¤ì´ ê°ìì˜ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.
    -   **ì„¸ì…˜ ìƒíƒœ(`sss`) ì´ˆê¸°í™”**: Streamlitì˜ `session_state`ë¥¼ `sss`ë¼ëŠ” ì¶•ì•½ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ í˜„ì¬ ì„ íƒ ëª¨ë“œ(`mode`), ì¶”ê°€ëœ ì‹œìŠ¤í…œ ëª©ë¡(`systems`), ê° ì‹œìŠ¤í…œì˜ íŒŒë¼ë¯¸í„° ê°œìˆ˜(`system_count`) ë“±ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ì´ ìƒíƒœëŠ” ì‚¬ìš©ìê°€ ì•±ê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë™ì•ˆ ê³„ì† ìœ ì§€ë©ë‹ˆë‹¤.

2.  **UI ë Œë”ë§ ë° ìƒí˜¸ì‘ìš©**:
    -   **ì‚¬ì´ë“œë°” ë Œë”ë§**: `st.sidebar` ë‚´ë¶€ì— ëª¨ë“œ ì„ íƒ(Segmented Control), ì‹œìŠ¤í…œ ì¶”ê°€(Selectbox, Button), ë¹„êµí•  ì‹œìŠ¤í…œ ì„ íƒ(Radio) ìœ„ì ¯ì„ ë Œë”ë§í•©ë‹ˆë‹¤. ê° ìœ„ì ¯ì˜ ê°’ì€ `session_state`ì™€ ì–‘ë°©í–¥ìœ¼ë¡œ ë°”ì¸ë”©ë©ë‹ˆë‹¤.
    -   **ë©”ì¸ íŒ¨ë„ ë Œë”ë§**: ì‚¬ìš©ìê°€ ì‚¬ì´ë“œë°”ì—ì„œ ì„ íƒí•œ ì‹œìŠ¤í…œì˜ íŒŒë¼ë¯¸í„° ì…ë ¥ ìœ„ì ¯(`st.number_input`)ë“¤ì„ ë Œë”ë§í•©ë‹ˆë‹¤. ê° ì…ë ¥ ìœ„ì ¯ì˜ `key`ëŠ” `{system_name}:{parameter_name}` í˜•ì‹ìœ¼ë¡œ ì§€ì •ë˜ì–´ `session_state`ì— ë…ë¦½ì ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

3.  **ìƒíƒœ ì—…ë°ì´íŠ¸ ë° ìë™ ì¬ì‹¤í–‰**:
    -   **ì½œë°± í•¨ìˆ˜**: 'Add to List'ë‚˜ 'Remove system' ë²„íŠ¼ í´ë¦­ ì‹œ, `on_click` ì¸ìì— ì—°ê²°ëœ ì½œë°± í•¨ìˆ˜(`add_system`, `remove_system`)ê°€ ì‹¤í–‰ë˜ì–´ `sss.systems` ë”•ì…”ë„ˆë¦¬ë¥¼ ì§ì ‘ ìˆ˜ì •í•©ë‹ˆë‹¤.
    -   **ìë™ í‰ê°€**: íŒŒë¼ë¯¸í„°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ Streamlitì€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¬ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ë•Œ `evaluate_parameters(sss, system_name)` í•¨ìˆ˜ê°€ ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ ë³€ê²½ëœ íŒŒë¼ë¯¸í„° ê°’ìœ¼ë¡œ ì¬ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê³ , ê²°ê³¼ë¥¼ `sss.systems[...]['variables']`ì— ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    -   **ì‹œê°í™” ì—…ë°ì´íŠ¸**: í‰ê°€ ê²°ê³¼ê°€ ì—…ë°ì´íŠ¸ë˜ë©´, `VisualizationManager`ê°€ í•´ë‹¹ ëª¨ë“œì— ë“±ë¡ëœ ì‹œê°í™” í•¨ìˆ˜ë“¤ì„ ì‹¤í–‰í•˜ì—¬ ì°¨íŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•©ë‹ˆë‹¤.

### 3.3. í™˜ê²½ ë° ë°°í¬ ì„¤ì •

-   **`pyproject.toml`**: `uv`ë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤. `[project]` ì„¹ì…˜ì—ëŠ” ì´ë¦„, ë²„ì „, ì„¤ëª… ë“± ë©”íƒ€ë°ì´í„°ê°€, `[project.dependencies]`ì—ëŠ” ì‹¤í–‰ì— í•„ìš”í•œ Python íŒ¨í‚¤ì§€ ëª©ë¡ì´ ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤. `uv sync` ëª…ë ¹ì–´ëŠ” ì´ íŒŒì¼ì„ ì½ì–´ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
-   **`Dockerfile`**: ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆí™”í•˜ê¸° ìœ„í•œ ë¹Œë“œ ëª…ì„¸ì…ë‹ˆë‹¤.
    -   `FROM python:3.11-slim`: ê°€ë²¼ìš´ Python 3.11 ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.
    -   `COPY . .`: í”„ë¡œì íŠ¸ ì „ì²´ íŒŒì¼ì„ ì»¨í…Œì´ë„ˆë¡œ ë³µì‚¬í•©ë‹ˆë‹¤.
    -   `RUN pip install uv && uv sync`: `uv`ë¥¼ ì„¤ì¹˜í•˜ê³ , `pyproject.toml`ì— ëª…ì‹œëœ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
    -   `CMD ["streamlit", "run", "app.py"]`: ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë  ë•Œ ì‹¤í–‰í•  ê¸°ë³¸ ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
-   **`docker-compose.yml`**: ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ Docker ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì •ì˜í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ íŒŒì¼ì…ë‹ˆë‹¤.
    -   `services.app`: `app`ì´ë¼ëŠ” ì„œë¹„ìŠ¤(ì»¨í…Œì´ë„ˆ)ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
    -   `build: .`: í˜„ì¬ ë””ë ‰í† ë¦¬ì˜ `Dockerfile`ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•©ë‹ˆë‹¤.
    -   `ports: - "8501:8501"`: í˜¸ìŠ¤íŠ¸ì˜ 8501 í¬íŠ¸ë¥¼ ì»¨í…Œì´ë„ˆì˜ 8501 í¬íŠ¸(Streamlit ê¸°ë³¸ í¬íŠ¸)ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤.
    -   `volumes: - .:/app`: í˜¸ìŠ¤íŠ¸ì˜ í˜„ì¬ ë””ë ‰í† ë¦¬ë¥¼ ì»¨í…Œì´ë„ˆì˜ `/app` ë””ë ‰í† ë¦¬ì™€ ë™ê¸°í™”(ë§ˆìš´íŠ¸)í•˜ì—¬, ì½”ë“œ ë³€ê²½ ì‹œ ì»¨í…Œì´ë„ˆë¥¼ ì¬ë¹Œë“œí•  í•„ìš” ì—†ì´ ë°”ë¡œ ì ìš©ë˜ë„ë¡ í•©ë‹ˆë‹¤.

## 4. API ë ˆí¼ëŸ°ìŠ¤: ìƒì„¸ I/O

ì´ ì„¹ì…˜ì—ì„œëŠ” Exergy Dashboardë¥¼ êµ¬ì„±í•˜ëŠ” í•µì‹¬ í•¨ìˆ˜ì™€ í´ë˜ìŠ¤ì˜ ì…ì¶œë ¥(I/O)ì„ ìƒì„¸í•˜ê²Œ ì„¤ëª…í•©ë‹ˆë‹¤.

---

### 4.1. `exergy_dashboard.system`

ì‹œìŠ¤í…œì˜ ë“±ë¡ê³¼ ê´€ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.

#### **`register_system(mode, system_type, system_config)`**
- **ì„¤ëª…**: ìƒˆë¡œìš´ ë¶„ì„ ì‹œìŠ¤í…œì„ ì „ì—­ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡í•©ë‹ˆë‹¤.
- **ì…ë ¥ (Inputs)**:
    - `mode` (`str`): ì‹œìŠ¤í…œì´ ì‚¬ìš©ë  ìš´ì „ ëª¨ë“œ. (ì˜ˆ: `'COOLING'`, `'HEATING'`)
    - `system_type` (`str`): ì‹œìŠ¤í…œì˜ ê³ ìœ  íƒ€ì…. (ì˜ˆ: `'ASHP'`, `'MyCustomSystem'`)
    - `system_config` (`dict`): ì‹œìŠ¤í…œì˜ ìƒì„¸ êµ¬ì„±ì„ ì •ì˜í•˜ëŠ” ë”•ì…”ë„ˆë¦¬. `get_system_template()`ì„ ì°¸ì¡°í•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤.
- **ì¶œë ¥ (Output)**: `None`

#### **`get_system_template()`**
- **ì„¤ëª…**: ìƒˆë¡œìš´ ì‹œìŠ¤í…œì„ ì •ì˜í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í‘œì¤€ í…œí”Œë¦¿ ë”•ì…”ë„ˆë¦¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **ì…ë ¥ (Inputs)**: ì—†ìŒ
- **ì¶œë ¥ (Output)**:
    - `dict`: ì‹œìŠ¤í…œ êµ¬ì„± í…œí”Œë¦¿. í•„ìˆ˜ í•„ë“œì™€ ë°ì´í„° íƒ€ì…ì— ëŒ€í•œ ê°€ì´ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
    ```python
    {
        'display': { 'title': str, 'icon': str },
        'parameters': {
            'param_name': {
                'explanation': {'EN': str, 'KR': str},
                'latex': str,
                'default': float,
                'range': [float, float],
                'unit': str,
                'step': float,
                'category': str (optional)
            }
        }
    }
    ```

#### **`get_systems()`**
- **ì„¤ëª…**: í˜„ì¬ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡ëœ ëª¨ë“  ì‹œìŠ¤í…œì˜ ì •ë³´ë¥¼ ê¹Šì€ ë³µì‚¬(deep copy)í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
- **ì…ë ¥ (Inputs)**: ì—†ìŒ
- **ì¶œë ¥ (Output)**:
    - `dict`: ë“±ë¡ëœ ëª¨ë“  ì‹œìŠ¤í…œ ì •ë³´. `{mode: {system_type: config}}` êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

---

### 4.2. `exergy_dashboard.evaluation`

ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ ë° ì—‘ì„œì§€ ê³„ì‚°ì„ ë‹´ë‹¹í•˜ëŠ” í‰ê°€ í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.

#### **`@registry.register(mode, system_type)`**
- **ì„¤ëª…**: í‰ê°€ í•¨ìˆ˜ë¥¼ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡í•˜ëŠ” ë°ì½”ë ˆì´í„°ì…ë‹ˆë‹¤.
- **ì…ë ¥ (Decorator Inputs)**:
    - `mode` (`str`): í‰ê°€ í•¨ìˆ˜ê°€ ì ìš©ë  ìš´ì „ ëª¨ë“œ.
    - `system_type` (`str`): í‰ê°€ í•¨ìˆ˜ê°€ ê³„ì‚°ì„ ìˆ˜í–‰í•  ì‹œìŠ¤í…œ íƒ€ì….
- **í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ (Decorated Function Signature)**:
    - **ì…ë ¥**: `params` (`dict`): í‚¤ëŠ” íŒŒë¼ë¯¸í„° ì´ë¦„(`str`), ê°’ì€ í•´ë‹¹ íŒŒë¼ë¯¸í„°ì˜ ê°’(`float`).
    - **ì¶œë ¥**: `dict`: ê³„ì‚°ëœ ëª¨ë“  ë³€ìˆ˜(ì¤‘ê°„ê°’ í¬í•¨)ë¥¼ ë‹´ì€ ë”•ì…”ë„ˆë¦¬. í‚¤ì™€ ê°’ ëª¨ë‘ `str` ë˜ëŠ” `float`ì…ë‹ˆë‹¤.
    ```python
    @registry.register('HEATING', 'ASHP')
    def evaluate_heating_ashp(params: dict) -> dict:
        T_0 = params['T_0']
        # ... more calculations ...
        X_h = Q_h * (1 - T_0 / T_h)
        return locals() # ëª¨ë“  ì§€ì—­ ë³€ìˆ˜ë¥¼ ë°˜í™˜
    ```

#### **`evaluate_parameters(sss, system_name)`**
- **ì„¤ëª…**: Streamlit ì„¸ì…˜ ìƒíƒœ(session state)ì™€ ì—°ë™í•˜ì—¬ íŠ¹ì • ì‹œìŠ¤í…œì˜ í‰ê°€ë¥¼ ìˆ˜í–‰í•˜ëŠ” í†µí•© í•¨ìˆ˜ì…ë‹ˆë‹¤.
- **ì…ë ¥ (Inputs)**:
    - `sss` (`streamlit.delta_generator.DeltaGenerator`): Streamlitì˜ `session_state` ê°ì²´.
    - `system_name` (`str`): í‰ê°€ë¥¼ ìˆ˜í–‰í•  ëŒ€ìƒ ì‹œìŠ¤í…œì˜ ì´ë¦„.
- **ì¶œë ¥ (Output)**:
    - `dict`: í‰ê°€ í•¨ìˆ˜ê°€ ë°˜í™˜í•œ ê³„ì‚° ê²°ê³¼ ë”•ì…”ë„ˆë¦¬. ì´ ê°’ì€ `sss.systems[system_name]['variables']`ì— ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

---

### 4.3. `exergy_dashboard.visualization`

ê³„ì‚° ê²°ê³¼ë¥¼ ì‹œê°í™”í•˜ëŠ” ì°¨íŠ¸ í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ëª¨ë“ˆì…ë‹ˆë‹¤.

#### **`@registry.register(mode, name)`**
- **ì„¤ëª…**: ì‹œê°í™” í•¨ìˆ˜ë¥¼ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡í•˜ëŠ” ë°ì½”ë ˆì´í„°ì…ë‹ˆë‹¤.
- **ì…ë ¥ (Decorator Inputs)**:
    - `mode` (`str`): ì´ ì‹œê°í™”ê°€ í‘œì‹œë  ìš´ì „ ëª¨ë“œ.
    - `name` (`str`): ëŒ€ì‹œë³´ë“œ íƒ­ì— í‘œì‹œë  ì‹œê°í™”ì˜ ì´ë¦„.
- **í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ (Decorated Function Signature)**:
    - **ì…ë ¥**:
        - `session_state` (`streamlit.delta_generator.DeltaGenerator`): Streamlitì˜ `session_state` ê°ì²´.
        - `selected_systems` (`list[str]`): ì‚¬ìš©ìê°€ UIì—ì„œ ì„ íƒí•œ ì‹œìŠ¤í…œë“¤ì˜ ì´ë¦„ ë¦¬ìŠ¤íŠ¸.
    - **ì¶œë ¥**: `altair.Chart`: Altair ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ìƒì„±ëœ ì°¨íŠ¸ ê°ì²´.
    ```python
    @registry.register('COOLING', 'COP Distribution')
    def plot_cop_dist(session_state, selected_systems):
        # ... ë°ì´í„° ì²˜ë¦¬ ...
        df = pd.DataFrame(...)
        chart = alt.Chart(df).mark_bar().encode(...)
        return chart
    ```

#### `VisualizationManager` í´ë˜ìŠ¤
- **ì„¤ëª…**: ë“±ë¡ëœ ì‹œê°í™” í•¨ìˆ˜ë“¤ì„ ê´€ë¦¬í•˜ê³ , Streamlit UIì— íƒ­ í˜•íƒœë¡œ ë Œë”ë§í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. `app.py`ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- **ì£¼ìš” ë©”ì„œë“œ**:
    - **`__init__(self, registry)`**: `VisualizationRegistry` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°›ì•„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    - **`render_tabs(self, session_state, selected_systems, mode)`**: í˜„ì¬ ì„ íƒëœ ëª¨ë“œì— ë“±ë¡ëœ ëª¨ë“  ì‹œê°í™”ë¥¼ ê°€ì ¸ì™€ Streamlit íƒ­ìœ¼ë¡œ êµ¬ì„±í•˜ê³  ê° íƒ­ì— ì°¨íŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. ì˜¤ë¥˜ ë°œìƒ ì‹œ UIì— ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

## 5. ì‚¬ìš©ë²• ë° ì˜ˆì œ

ìƒˆë¡œìš´ ì‹œìŠ¤í…œì„ ì¶”ê°€í•˜ê³  ì‹¤í–‰í•˜ëŠ” ì „ì²´ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1.  **ì‹œìŠ¤í…œ íŒŒì¼ ìƒì„±**: `systems/my_new_system.py` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
2.  **ì½”ë“œ ì‘ì„±**: íŒŒì¼ì— ì‹œìŠ¤í…œ, í‰ê°€, ì‹œê°í™” í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ê³  ë“±ë¡í•©ë‹ˆë‹¤.

    ```python
    # systems/my_new_system.py
    from exergy_dashboard.system import register_system
    from exergy_dashboard.evaluation import registry as eval_registry
    from exergy_dashboard.visualization import registry
    import altair as alt
    import pandas as pd

    # 1. ì‹œìŠ¤í…œ ì •ì˜ ë° ë“±ë¡
    my_system = { ... } # 4.1. êµ¬ì¡° ì°¸ì¡°
    register_system('MY_MODE', 'MY_SYSTEM', my_system)

    # 2. í‰ê°€ í•¨ìˆ˜ ë“±ë¡
    @eval_registry.register('MY_MODE', 'MY_SYSTEM')
    def evaluate_my_system(params):
        # ... ê³„ì‚° ë¡œì§ ...
        return {'my_result': 123}

    # 3. ì‹œê°í™” í•¨ìˆ˜ ë“±ë¡
    @registry.register('MY_MODE', 'My Result Vis')
    def plot_my_vis(session_state, selected_systems):
        # ... ì‹œê°í™” ë¡œì§ ...
        return alt.Chart(...)
    ```

3.  **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**: `app.py`ê°€ ì‹¤í–‰ë˜ë©´ `systems` ë””ë ‰í† ë¦¬ì˜ `*_system.py` íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì„í¬íŠ¸í•˜ì—¬ ì‹œìŠ¤í…œì„ ë¡œë“œí•©ë‹ˆë‹¤.

    ```bash
    uv sync
    streamlit run app.py
    ```

## 6. í´ë” êµ¬ì¡°

```
.
â”œâ”€â”€ app.py                  # Streamlit ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”œâ”€â”€ Dockerfile              # Docker ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ docker-compose.yml      # Docker Compose ì„¤ì •
â”œâ”€â”€ docs/                   # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ examples/               # ì˜ˆì œ ì½”ë“œ
â”œâ”€â”€ notebooks/              # ë°ì´í„° ë¶„ì„ ë° í…ŒìŠ¤íŠ¸ìš© ë…¸íŠ¸ë¶
â”œâ”€â”€ src/
â”‚   â””â”€â”€ exergy_dashboard/   # ë©”ì¸ ì†ŒìŠ¤ ì½”ë“œ
â”‚       â”œâ”€â”€ system.py       # ì‹œìŠ¤í…œ ë“±ë¡ ë° ê´€ë¦¬
â”‚       â”œâ”€â”€ evaluation.py   # í‰ê°€ í•¨ìˆ˜ ë ˆì§€ìŠ¤íŠ¸ë¦¬
â”‚       â””â”€â”€ visualization.py# ì‹œê°í™” í•¨ìˆ˜ ë ˆì§€ìŠ¤íŠ¸ë¦¬
â””â”€â”€ systems/                # ì‚¬ìš©ì ì •ì˜ ì‹œìŠ¤í…œ ëª¨ë“ˆ
    â”œâ”€â”€ cooling_system.py
    â””â”€â”€ heating_system.py
``` 

## 7. ëŒ€ì‹œë³´ë“œ ì‚¬ìš© ê°€ì´ë“œ (End-User Guide)

ì´ ì ˆì—ì„œëŠ” **ê°œë°œ ê²½í—˜ì´ ì—†ëŠ” ì¼ë°˜ ì‚¬ìš©ì**ë„ Exergy Dashboardë¥¼ ë¹ ë¥´ê²Œ ì²´í—˜í•˜ê³  í™œìš©í•  ìˆ˜ ìˆë„ë¡ ë‹¨ê³„ë³„ ì•ˆë‚´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### 7.1. ë¹ ë¥¸ ì‹¤í–‰ (Docker ì‚¬ìš©)

ì¶”ê°€ì ì¸ íŒŒì´ì¬ í™˜ê²½ ì„¤ì • ì—†ì´ë„ Dockerë§Œ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ í•œ ì¤„ ëª…ë ¹ì–´ë¡œ ëŒ€ì‹œë³´ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
# 1) í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì´ë¯¸ì§€ ë¹Œë“œ ë° ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ)
docker compose up -d --build

# 2) ë¸Œë¼ìš°ì €ì—ì„œ ëŒ€ì‹œë³´ë“œ ì ‘ì†
# ê¸°ë³¸ì ìœ¼ë¡œ http://localhost:8501 ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
```

*Tip*: ì´ë¯¸ í¬íŠ¸ 8501ì„ ì‚¬ìš© ì¤‘ì¸ ê²½ìš°, `docker-compose.yml` íŒŒì¼ì˜ **ports** í•­ëª©(`8501:8501`)ì—ì„œ í˜¸ìŠ¤íŠ¸ í¬íŠ¸ë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë°”ê¾¼ í›„ ì¬ì‹¤í–‰í•˜ì„¸ìš”.

### 7.2. ë¡œì»¬ í™˜ê²½ì—ì„œ ì‹¤í–‰ (íŒŒì´ì¬ ê°€ìƒí™˜ê²½)

```bash
# 1) ì˜ì¡´ì„± ì„¤ì¹˜ (uv ì‚¬ìš©)
uv sync

# 2) ëŒ€ì‹œë³´ë“œ ì‹¤í–‰
streamlit run app.py
```

ì‹¤í–‰ í›„ í„°ë¯¸ë„ì— í‘œì‹œë˜ëŠ” URL(ê¸°ë³¸ê°’: http://localhost:8501)ì„ ë¸Œë¼ìš°ì €ì— ì…ë ¥í•˜ë©´ ëŒ€ì‹œë³´ë“œê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

### 7.3. ì²« í™”ë©´ ë‘˜ëŸ¬ë³´ê¸°

1. **ì‚¬ì´ë“œë°”**
   - ë¶„ì„ *ëª¨ë“œ* ì„ íƒ: ëƒ‰ë°©, ë‚œë°©, ì˜¨ìˆ˜ ë“±.
   - ì‹œìŠ¤í…œ *ì¶”ê°€/ì œê±°* ë²„íŠ¼: ì›í•˜ëŠ” ì‹œìŠ¤í…œì„ ì²´í¬ë°•ìŠ¤ë¡œ ì„ íƒí•©ë‹ˆë‹¤.
2. **ë©”ì¸ íŒ¨ë„**
   - ê° ì‹œìŠ¤í…œ ì¹´ë“œ: íŒŒë¼ë¯¸í„° ìŠ¬ë¼ì´ë”ì™€ ì…ë ¥ì°½ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
   - **Calculate** ë²„íŠ¼: ëª¨ë“  ì‹œìŠ¤í…œì˜ íŒŒë¼ë¯¸í„° ì„¤ì •ì´ ëë‚˜ë©´ í´ë¦­í•˜ì—¬ ê²°ê³¼ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
   - **ì‹œê°í™” íƒ­**: ë“±ë¡ëœ ì‹œê°í™” í•¨ìˆ˜ ëª©ë¡ì´ íƒ­ìœ¼ë¡œ í‘œì‹œë˜ë©°, í´ë¦­ ì‹œ ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

> UI ë°°ì¹˜ëŠ” ë²„ì „ì— ë”°ë¼ ì¡°ê¸ˆì”© ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ëŠ¥ ìœ„ì¹˜ê°€ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš° ì‚¬ì´ë“œë°”ì˜ `Refresh` ë²„íŠ¼(ğŸ”„)ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.

### 7.4. íŒŒë¼ë¯¸í„° ì…ë ¥ íŒ

- ìŠ¬ë¼ì´ë” ì™¸ì—ë„ ìˆ«ìë¥¼ **ë”ë¸” í´ë¦­**í•˜ì—¬ í‚¤ë³´ë“œë¡œ ì •í™•í•œ ê°’ì„ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë‹¨ìœ„(Â°C, kg/s ë“±)ëŠ” ìš°ì¸¡ ë¼ë²¨ë¡œ í‘œì‹œë˜ë¯€ë¡œ í—·ê°ˆë¦¬ì§€ ì•Šë„ë¡ í™•ì¸í•˜ì„¸ìš”.
- ë™ì¼ ëª¨ë“œ ë‚´ì—ì„œ *ì—¬ëŸ¬ ì‹œìŠ¤í…œ*ì„ ë™ì‹œì— ë¹„êµí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë¹„ìŠ·í•œ ì¡°ê±´ì„ ìœ ì§€í•˜ë©° íŒŒë¼ë¯¸í„°ë§Œ ë³€ê²½í•´ ì„±ëŠ¥ì„ ë¹„êµí•´ ë³´ì„¸ìš”.

### 7.5. ê²°ê³¼ í•´ì„í•˜ê¸°

| ì»¬ëŸ¬ | ì˜ë¯¸ |
|------|------|
| **íŒŒë€ìƒ‰** ë§‰ëŒ€ | ëƒ‰ë°© ëª¨ë“œì˜ ì—‘ì„œì§€ ì†ì‹¤ |
| **ë¹¨ê°„ìƒ‰** ë§‰ëŒ€ | ë‚œë°© ëª¨ë“œì˜ ì—‘ì„œì§€ ì†ì‹¤ |
| **íšŒìƒ‰ ë°°ê²½**   | ê¸°ì¤€(í™˜ê²½) ì¡°ê±´ |

ì‹œê°í™”ë§ˆë‹¤ ë²”ë¡€ê°€ ì œê³µë˜ë©°, **Legend** í•­ëª©ì„ í´ë¦­í•˜ë©´ íŠ¹ì • ì‹œìŠ¤í…œ/ë³€ìˆ˜ë¥¼ ìˆ¨ê¸°ê±°ë‚˜ ê°•ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 8. FAQ & Troubleshooting

| ì§ˆë¬¸ | ë‹µë³€ |
|------|------|
| *ëŒ€ì‹œë³´ë“œ ì ‘ì†ì´ ì•ˆ ë¼ìš”.* | í„°ë¯¸ë„ì— ë‚˜íƒ€ë‚œ URLì´ ë°©í™”ë²½ìœ¼ë¡œ ì°¨ë‹¨ë˜ì—ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°™ì€ PCì—ì„œ ì‹¤í–‰í–ˆë‹¤ë©´ `localhost` ëŒ€ì‹  `127.0.0.1`ì„ ì‚¬ìš©í•´ ë³´ì„¸ìš”. |
| *ì°¨íŠ¸ê°€ ë³´ì´ì§€ ì•Šì•„ìš”.* | ë¸Œë¼ìš°ì € ìºì‹œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨(F5) í›„ì—ë„ ë™ì¼í•˜ë‹¤ë©´ í„°ë¯¸ë„ì— ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , Altair ë²„ì „ì„ ìµœì‹ ìœ¼ë¡œ ìœ ì§€í•˜ì„¸ìš”. |
| *í¬íŠ¸ ì¶©ëŒ ì˜¤ë¥˜(Address already in use)* | ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ Streamlit í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•˜ê±°ë‚˜, `streamlit run app.py --server.port 8502`ì²˜ëŸ¼ ë‹¤ë¥¸ í¬íŠ¸ë¥¼ ì§€ì •í•˜ì„¸ìš”. |
| *ìƒˆ ì‹œìŠ¤í…œì„ ì¶”ê°€í–ˆëŠ”ë° UIì— ì•ˆ ë³´ì—¬ìš”.* | íŒŒì¼ ì´ë¦„ì´ `*_system.py` í˜•íƒœì¸ì§€ í™•ì¸í•˜ê³ , ì•±ì„ ì¬ì‹¤í–‰í•˜ê±°ë‚˜ ì‚¬ì´ë“œë°”ì˜ ğŸ”„ ë²„íŠ¼ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”. |
| *ê²°ê³¼ê°€ ì´ìƒí•´ ë³´ì—¬ìš”.* | íŒŒë¼ë¯¸í„° ë²”ìœ„ê°€ í•©ë¦¬ì ì¸ì§€ í™•ì¸ í›„, í‰ê°€ í•¨ìˆ˜(`evaluation.py`)ì— ì˜ˆì™¸ ì²˜ë¦¬(ë¶„ëª¨ 0 ë“±)ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. |

> ì¶”ê°€ì ì¸ ì§ˆë¬¸Â·ë²„ê·¸ ì œë³´ëŠ” GitHub Issueë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”. ì¬í˜„ ë°©ë²•(íŒŒë¼ë¯¸í„° ê°’, ìº¡ì²˜)ê³¼ ë¡œê·¸ë¥¼ í•¨ê»˜ ì œê³µí•´ ì£¼ì‹œë©´ ë¹ ë¥¸ ëŒ€ì‘ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. 